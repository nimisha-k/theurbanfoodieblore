<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/> 
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
	<link rel="stylesheet" type="text/css" href="mainMainPageCSS.css">
	<title>The Urban Foodie</title>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3"></script>
	<script type="text/javascript">
		function logInButton()
		{
				window.location = "mainPage.html"
		}

		function signUpButton()
		{
				window.location = "Reg.html"
		}

		function aboutClicked()
		{
			window.location = "about.html"
		}

		function fbackClicked()
		{
			window.location = "feedback.html"
		}

		function geo()
		{
			if(navigator.geolocation)
			{
				navigator.geolocation.getCurrentPosition(success);
			}

			function success(position)
			{
				var latitude = position.coords.latitude;
				var longitude = position.coords.longitude;
				codeLatLng(latitude, longitude);
			}

			function failure()
			{
				alert("location service not working")
			}

			function codeLatLng(lat, lng)
			{

			    var latlng = new google.maps.LatLng(lat, lng);
			    var geocoder = new google.maps.Geocoder();
			    geocoder.geocode({'latLng': latlng}, function(results, status) 
			    {
			        if(status == google.maps.GeocoderStatus.OK)
			        {
			        console.log(results)
				        if (results[1])
				        {
				         	//formatted address
				            alert(results[0].formatted_address)
				        	//find country name
				            for (var i=0; i<results[0].address_components.length; i++)
				            {
				            	for (var b=0;b<results[0].address_components[i].types.length;b++)
				            	{

				            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
				                	if (results[0].address_components[i].types[b] == "administrative_area_level_1") 
				                	{
				                    //this is the object you are looking for
				                    city= results[0].address_components[i];
				                    break;
		                			}
		            			}
		        			}
		        			//city data
		        			alert(city.short_name + " " + city.long_name)
		        		}
		        		else
		        		{
	          				alert("No results found");
	        			}
	      			} 
	      			else 
	      			{
	        			alert("Geocoder failed due to: " + status);
	      			}
	    		});
	        }			
		}

		function fb()
		{
			window.location = "https://www.facebook.com/TheUrbanFoodieBlore";
		}

		function insta()
		{
			window.location = "https://www.instagram.com/theurbanfoodieblore/"
		}

		function twitter()
		{
			window.location = "https://twitter.com/?lang=en"
		}

		function gplus()
		{
			window.location = "https://plus.google.com/u/1/113694876150928667621"
		}		

		function toMainPage()
		{
			var text = document.getElementById("textArea")
			localStorage.setItem("Address",  text.value)
			window.location = "mainPage.html"
		}

		var array = new Array("Hungry?", "Can't Cook?", "Mum's not home?")

		function foo()
		{
			var i=0
			var x = document.getElementById("line")
			function changeText()
			{
				x.innerHTML = array[i]
				i = (i+1)%3
			}

			var t1 = setInterval(changeText, 2000)
		}
		
	</script>
</head>
<body onload="foo()">
	<div class="header">
		<h1>Urban Foodie</h1>
		<h3 id="about" onclick="aboutClicked()">About</h3>
		<h3 id="fback" onclick="fbackClicked()">Feedback</h3>
		<h3 id="bar">|</h3>
		<div class="images">
			<img src="fb.png" class="icon" height="50" width="50" onclick="fb()">
			<img src="twitter.png" class="icon" height="50" width="50" onclick="twitter()">
			<img src="insta.png" class="icon" height="50" width="50" onclick="insta()">
			<img src="gplus.png" class="icon" height="50" width="50" onclick="gplus()">
		</div>
		<button type="button" class="loginbtn" onclick="logInButton()">Log In</button>
		<button type="button" class="signupbtn" onclick="signUpButton()">Sign Up</button>
	</div>

	<div id="coolStuff">
		<h1 id="line"></h1>
		<h2 id="byline">Order from The Urban Foodie!</h5>
	</div>

	<div class="geolocation">
		<textarea rows="1" cols="200" id = "textArea" class="textArea" placeholder="Enter Address"></textarea>
		<button class="locButton" onclick="geo()">Get Location</button>
		<button class="foodButton" onclick="toMainPage()">Food</button>
	</div>
	<div id = "video">
		<video width = "420" height = "315" controls>
			<source src = "pizza.mp4" type = "video/mp4">
	</div>

</body>
</html>